services:
  mongo.db.catalog:
    restart: always
    image: mongo:8.0-rc
    container_name: mongo.db.catalog.container
    ports:
      - "27030:27017"
    volumes:
        - mongo.db.catalog.volume:/data/db
  mongo.db.discount:
    restart: always
    image: mongo:8.0-rc
    container_name: mongo.db.discount.container
    ports:
      - "27031:27017"
    volumes:
        - mongo.db.discount.volume:/data/db
  redis.db:
    restart: always
    image: redis:7.0-alpine
    container_name: redis.db
    command: ["redis-server", "--requirepass", "${REDIS_PASSWORD}"]
    ports:
      - "6379:6379"
    volumes:
        - redis.db.basket.volume:/data

volumes:
    mongo.db.catalog.volume:
    mongo.db.discount.volume:
    redis.db.basket.volume:
